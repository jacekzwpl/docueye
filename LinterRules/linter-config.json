{
    "MaxAllowedSeverity": "Error",
    "Variables": {
        "AllowedContainerTechnologies": [
            "ASP.NET MVC", "REST API", "MSSQL", "REDIS"
        ],
        "AllowedRelationshipTechnologies": {
            "REST API": ["HTTPS"],
            "MSSQL": ["TCP/1433"],
            "REDIS": ["TCP/6379"],
            "ASP.NET MVC": ["HTTPS"]
        }
    },
    "Rules": [
        {
            "Id": "C4-ARCH-001",
            "Name": "Containers should not have cyclic dependencies",
            "Description": "Containers must not depend on each other in a cyclic manner to avoid tight coupling and maintainability issues.",
            "Severity": "Error",
            "Type": "General",
            "Expression": "GeneralIssuesFinder.CyclicDependenciesExists(\"Container\",@ModelRelationships)",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-001"
        },
        {
            "Id": "C4-ARCH-002",
            "Name": "Frontend can not connect directly to database",
            "Description": "Frontend services should not connect directly to the database for security and architecture reasons.",
            "Severity": "Error",
            "Type": "ModelRelationship",
            "Expression": "Source.Tags.Contains(\"Frontend\") and Destination.Tags.Contains(\"Database\")",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-002"
        },
        {
            "Id": "C4-ARCH-003",
            "Name": "Container technology must be defined",
            "Description": "Each container must have a defined technology to ensure clarity in the architecture.",
            "Severity": "Warning",
            "Type": "ModelElement",
            "Expression": "Tags.Contains(\"Container\") and Technology == null",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-003"
        },
        {
            "Id": "C4-ARCH-004",
            "Name": "Container technology must be one of the allowed technologies",
            "Description": "Containers should use only approved technologies to maintain consistency and supportability.",
            "Severity": "Warning",
            "Type": "ModelElement",
            "Expression": "Tags.Contains(\"Container\") and Technology not_in @AllowedContainerTechnologies",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-004"
        },
        {
            "Id": "C4-ARCH-005",
            "Name": "Relationships from external systems to database are not allowed",
            "Description": "External systems should not have direct relationships to databases to ensure security and proper architecture.",
            "Severity": "Error",
            "Type": "ModelRelationship",
            "Expression": "Source.ParentIdentifier != Destination.ParentIdentifier and Destination.Tags.Contains(\"Database\")",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-005"
        },
        {
            "Id": "C4-ARCH-006",
            "Name": "Relationship technology must be defined",
            "Description": "Each relationship must have a defined technology to ensure clarity in the architecture.",
            "Severity": "Warning",
            "Type": "ModelRelationship",
            "Expression": "Technology == null",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-006"
        },
        {
            "Id": "C4-ARCH-007",
            "Name": "Every container should have instance",
            "Description": "Each container should have at least one instance to ensure it is deployed and operational.",
            "Severity": "Warning",
            "Type": "ModelElement",
            "Expression": "Tags.Contains(\"Container\") and Identifier not_in @ModelElements.Where(e => e.Tags.Contains(\"Container Instance\")).Select(e => e.InstanceOfIdentifier)",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-007"
        },
        {
            "Id": "C4-ARCH-008",
            "Name": "Database container must not have outgoing relationships",
            "Description": "Database containers should not have outgoing relationships to ensure data integrity and proper architecture.",
            "Severity": "Error",
            "Type": "ModelRelationship",
            "Expression": "Source.Tags.Contains(\"Database\") and Source.Tags.Contains(\"Container\")",
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-008"
        },
        {
            "Id": "C4-ARCH-009",
            "Name": "Relationship description must be defined",
            "Description": "Each relationship must have a defined description to ensure clarity in the architecture.",
            "Severity": "Warning",
            "Type": "ModelRelationship",
            "Expression": "string.IsNullOrEmpty(Description)",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-009"
        },
        {
            "Id": "C4-ARCH-010",
            "Name": "Element description must be defined",
            "Description": "Each element must have a defined description to ensure clarity in the architecture.",
            "Severity": "Warning",
            "Type": "ModelElement",
            "Expression": "string.IsNullOrEmpty(Description)",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-010"
        },
        {
            "Id": "C4-ARCH-011",
            "Name": "Relationship technology must be consistent with destination container technology",
            "Description": "The relationship uses a technology that is not supported by the target container.",
            "Severity": "Warning",
            "Type": "ModelRelationship",
            "Expression": "Destination.Tags.Contains(\"Container\") and @AllowedRelationshipTechnologies.ContainsKey(Destination.Technology) and Technology not_in @AllowedRelationshipTechnologies[Destination.Technology]",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-011"
        },
        {
            "Id": "C4-ARCH-012",
            "Name": "Containers must specify SLA / criticality tier",
            "Description": "Each container must specify its SLA or criticality tier to ensure proper prioritization and resource allocation.",
            "Severity": "Information",
            "Type": "ModelElement",
            "Expression": "Tags.Contains(\"Container\") and Tags.Where(t => t.StartsWith(\"BusinessCriticality-\")).FirstOrDefault() == null",  
            "HelpLink": "https://docueye.com/architecture-linter/rules/C4-ARCH-012"
        }
    ]
}